{% extends '_base.twig' %}

{% block page_description %}Bad coffee no more: a handy calculator to help you brew a tasty cup of coffee{% endblock %}

{% block title %}Filer Coffee Calculator{% endblock %}

{% block link_calculator %}active{% endblock %}

{% block content %}
    <div class="mb-5">
        <form>
            <h1 class="mb-3">Filter Coffee Calculator</h1>
            <section class="mb-4">
                <h2 class="h4">Strength</h2>
                <label for="ratio">How strong would you like your coffee? </label>
                <div class="form-row align-items-baseline">
                    <p class="col-auto">strong</p>
                    <div class="col-6 col-md-8 col-lg-10"><input class="form-control" id="ratio" name="strength" type="range" min="10" max="20" step="1" value="16"></div>
                    <p class="col-auto">weak</p>
                </div>
                <p>Your selected ratio is <span class="font-weight-bold">1: </span><span id="chosenRatio" class="font-weight-bold"></span>
                    (the standard ratio being 1 unit of coffee to 16 units of water).
                 </p>
            </section>
            <section class="mb-4">
                <h2 class="h4">Amount of water</h2>
                <label for="water" class="mr-1">How much water are you using (in grams)?</label>
                <div class="form-row align-items-center mb-2">
                    <div class="col-md-10">
                        <input class="form-control"id="sliderValue" name="water" type="range" min="50" max="1000" step="10" oninput="numberValue.value = sliderValue.value">
                    </div>
                    <div class="col-md-2">
                        <input class="form-control" type="number" id="numberValue" step="10" name="water" value="250">
                    </div>
                </div>
                <p>This will yield approximately <span id="displayYield" class="font-weight-bold"></span> <span class="font-weight-bold">grams</span> of brewed coffee.</p>
            </section>
        </form>
        <h2 class="h4">Quantity of ground coffee</h2>
        <p class="mt-2">You will need <span id="displayWeight" class="font-weight-bold"></span> <span class="font-weight-bold">grams</span>
            of ground coffee to brew coffee of the strength and in the quantity you specified.
        </p>
    </div>
{% endblock %}

{% block script %}
    <script>
        var slider = document.getElementById("ratio");
        var chosenRatio = document.getElementById("chosenRatio");
        var displayWeight = document.getElementById("displayWeight");
        var displayYield = document.getElementById("displayYield");



        function calculateWeight(water,ratio) {
            return Math.round(water /ratio);
           }

/*         function calculateWater(water) {
            return Math.round(water*0.9)
        } */

        function displayAll() {
            chosenRatio.innerHTML = slider.value;
            displayWeight.innerHTML = calculateWeight(document.getElementById("numberValue").value, slider.value);
            displayYield.innerHTML = document.getElementById("numberValue").value*0.9;
        }

        displayAll();

        document.querySelector('form').addEventListener("input",displayAll);
    </script>
{% endblock %}
